#!/bin/sh
# # ç°åœ¨èƒ½é‡
# read -r energy_now </sys/class/power_supply/BAT0/energy_now
# # æ»¡èƒ½é‡
# read -r energy_full </sys/class/power_supply/BAT0/energy_full
# val=$(( energy_full-energy_now ))
# # å½“å‰å……ç”µåŠŸç‡
# ğŸš¨
# "Full") status="âš¡" ;;
# "Discharging") status="ğŸ”‹" ;;
# "Charging") status="ğŸ”Œ" ;;
# "Not charging") status="ğŸ›‘" ;;
# "Unknown") status="â™»ï¸" ;;
# read -r rate </sys/class/power_supply/BAT0/power_now
# # å½“å‰å……ç”µç”µå‹
# read -r vol </sys/class/power_supply/BAT0/voltage_now
# hr=$(( vol / rate))
# echo ç©ºè½½$val
# echo åŠŸç‡$rate
# echo ç”µå‹$vol
# echo å°æ—¶$hr

for battery in /sys/class/power_supply/BAT*?; do
	case "$(cat "$battery/status")" in
		"Full") status="âš¡";;
		"Discharging") status="ğŸ”‹" ;;
		"Charging") status="ğŸ”Œ" ;;
		"Not charging") status="â—" ;;
		"Unknown") status="â™»ï¸" ;;
	esac
	[ "$status" = "ğŸ”‹" ] && [ "$capacity" -le 25 ] && warn="ğŸš¨"
	bat=$(cat $battery/capacity)
	printf "%s%s%d" "$status" "$warn" "$bat"; unset warn
done

[ "$1" == "" ] && exit

case $1 in
	1)
		[ "$status" = "ğŸ”‹" ] && notify-send $(acpi | awk '{print $5}')
		[ "$status" = "ğŸ”Œ" ] && notify-send $(acpi | awk '{print $5}')
		;;
	3)
		"st" -e "nvim" "$0";;
	4) xbacklight -inc 10;;
	5) notify-send -t 0 "ğŸ”‹ Battery module" "ğŸ”‹: discharging\nâ—: not charging\nâ™»: stagnant charge\nğŸ”Œ: charging\nâš¡: charged\nğŸš¨: battery very low!\nCtrl + Mbutton change adjust xbacklight." ;;
	6) xbacklight -dec 10;;
esac
